<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>KingLion</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://kinglion580.github.io/"/>
  <updated>2018-01-13T13:33:12.786Z</updated>
  <id>http://kinglion580.github.io/</id>
  
  <author>
    <name>King Lion</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>在其他电脑修改已经创建好的 hexo 项目</title>
    <link href="http://kinglion580.github.io/2018/01/13/hexo_git/"/>
    <id>http://kinglion580.github.io/2018/01/13/hexo_git/</id>
    <published>2018-01-13T13:30:12.140Z</published>
    <updated>2018-01-13T13:33:12.786Z</updated>
    
    <content type="html"><![CDATA[<h2 id="添加-ssh-key-到-github-上"><a href="#添加-ssh-key-到-github-上" class="headerlink" title="添加 ssh key 到 github 上"></a>添加 ssh key 到 github 上</h2><h3 id="获取-ssh-key"><a href="#获取-ssh-key" class="headerlink" title="获取 ssh key"></a>获取 ssh key</h3><p>两种方式：</p><ul><li>Git Bash</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cat ~/.ssh/id_rsa.pub</span><br></pre></td></tr></table></figure><p>将内容复制</p><ul><li>git GUI</li></ul><p><code>Help-&gt;Show SSH Key-&gt;Copy To Clipboard</code> </p><p><img src="http://ww1.sinaimg.cn/large/8f2bdb7fgy1fnf7pr52fvj20e507hwek.jpg" alt=""></p><h3 id="添加到-github"><a href="#添加到-github" class="headerlink" title="添加到 github"></a>添加到 github</h3><p><code>setting-&gt; ssh and gpg-&gt; add ssh key</code> 。title 里随便填个设备名，下面的输入框粘贴我们刚刚复制的内容。最后点击 <code>add ssh key</code> 即可添加成功。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://ww1.sinaimg.cn/large/8f2bdb7fgy1fnf7v90zeag20eb08wdsx.gif" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="克隆仓库到本地"><a href="#克隆仓库到本地" class="headerlink" title="克隆仓库到本地"></a>克隆仓库到本地</h2><p>打开 git bash，先把你的项目克隆到本地，两种克隆方式：</p><ul><li><code>HTTPS</code> ：每次提交的时候要输入用户名和密码。</li><li><code>SSH</code> ：添加了 ssh key 到 github 上的话，就不用输入用户名和密码。</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://ww1.sinaimg.cn/large/8f2bdb7fgy1fnf7za2nv2j20c00780t1.jpg" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>点击右边的小按钮复制链接。然后在 git bash 中输入如下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> git@github.com:kinglion580/kinglion580.github.io.git</span><br></pre></td></tr></table></figure><p>这样就把仓库克隆下来了。</p><p>除了 clone ，也可以直接到 <code>releases</code> 中去下载需要的版本，然后解压也是可以</p><h2 id="安装-hexo"><a href="#安装-hexo" class="headerlink" title="安装 hexo"></a>安装 hexo</h2><p>首先进入克隆下来的仓库的目录下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> kinglion580.github.io</span><br></pre></td></tr></table></figure><p>然后执行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ hexo <span class="built_in">help</span></span><br><span class="line">ERROR Local hexo not found <span class="keyword">in</span> E:\github\kinglion580.github.io</span><br><span class="line">ERROR Try running: <span class="string">'npm install hexo --save'</span></span><br></pre></td></tr></table></figure><p>这个时候是会报错的。我们需要安装 hexo</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo --save</span><br></pre></td></tr></table></figure><p>再运行 <code>hexo help</code> 可以看到如下信息：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">$ hexo <span class="built_in">help</span></span><br><span class="line">Usage: hexo &lt;<span class="built_in">command</span>&gt;</span><br><span class="line"></span><br><span class="line">Commands:</span><br><span class="line">  clean     Remove generated files and cache.</span><br><span class="line">  config    Get or <span class="built_in">set</span> configurations.</span><br><span class="line">  deploy    Deploy your website.</span><br><span class="line">  generate  Generate static files.</span><br><span class="line">  <span class="built_in">help</span>      Get <span class="built_in">help</span> on a <span class="built_in">command</span>.</span><br><span class="line">  init      Create a new Hexo folder.</span><br><span class="line">  list      List the information of the site</span><br><span class="line">  migrate   Migrate your site from other system to Hexo.</span><br><span class="line">  new       Create a new post.</span><br><span class="line">  publish   Moves a draft post from _drafts to _posts folder.</span><br><span class="line">  render    Render files with renderer plugins.</span><br><span class="line">  server    Start the server.</span><br><span class="line">  version   Display version information.</span><br><span class="line"></span><br><span class="line">Global Options:</span><br><span class="line">  --config  Specify config file instead of using _config.yml</span><br><span class="line">  --cwd     Specify the CWD</span><br><span class="line">  --debug   Display all verbose messages <span class="keyword">in</span> the terminal</span><br><span class="line">  --draft   Display draft posts</span><br><span class="line">  --safe    Disable all plugins and scripts</span><br><span class="line">  --silent  Hide output on console</span><br><span class="line"></span><br><span class="line">For more <span class="built_in">help</span>, you can use <span class="string">'hexo help [command]'</span> <span class="keyword">for</span> the detailed information</span><br><span class="line">or you can check the docs: http://hexo.io/docs/</span><br></pre></td></tr></table></figure><h2 id="安装依赖的插件"><a href="#安装依赖的插件" class="headerlink" title="安装依赖的插件"></a>安装依赖的插件</h2><p>在 <code>package.json</code> 文件中保存了 hexo 的版本和依赖的软件：</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://ww1.sinaimg.cn/large/8f2bdb7fgy1fnf8mpwuj1j20nu0g3q44.jpg" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>执行 <code>npm install</code> 的时候自动将需要的这些软件都安装上了。</p><p>执行 <code>hexo s</code> 后，在浏览器输入地址 <code>localhost:4000</code> 就可以看到博客了。</p><p>除了修改了系统主配置文件 <code>_config.yml</code> 需要重新生成启动外，修改其他的文件直接刷新浏览器就可以看到效果。</p><h2 id="关于推送"><a href="#关于推送" class="headerlink" title="关于推送"></a>关于推送</h2><p>首先将源码推送到 github 上（source 分支），然后再使用 hexo 的命令生成且推送到 master 分支上。</p><p>在仓库根目录下：</p><p><code>$</code> 左边是代表分支，不用输入，只输<code>$</code> 右边</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span>$ git add .</span><br><span class="line"><span class="built_in">source</span>$ git commit -m <span class="string">'your descri'</span></span><br><span class="line"><span class="built_in">source</span>$ git push origin <span class="built_in">source</span></span><br></pre></td></tr></table></figure><p>将 hexo 生成内容推送到 master 分支：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hexo clean</span><br><span class="line">$ hexo g -d</span><br></pre></td></tr></table></figure><blockquote><p>hexo 默认就是推送到 master 分支上，这个配置在系统主配置文件 <code>_config.yml</code> 中：</p><p><code>deploy</code> 配置项，想更改分支直接修改 <code>branch</code> 值。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://ww1.sinaimg.cn/large/8f2bdb7fgy1fnf928vg84j20ep043jrl.jpg" alt="" title="">                </div>                <div class="image-caption"></div>            </figure></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;添加-ssh-key-到-github-上&quot;&gt;&lt;a href=&quot;#添加-ssh-key-到-github-上&quot; class=&quot;headerlink&quot; title=&quot;添加 ssh key 到 github 上&quot;&gt;&lt;/a&gt;添加 ssh key 到 github 上&lt;/
      
    
    </summary>
    
      <category term="hexo" scheme="http://kinglion580.github.io/categories/hexo/"/>
    
      <category term="git" scheme="http://kinglion580.github.io/categories/hexo/git/"/>
    
    
      <category term="hexo" scheme="http://kinglion580.github.io/tags/hexo/"/>
    
      <category term="git" scheme="http://kinglion580.github.io/tags/git/"/>
    
      <category term="deploy" scheme="http://kinglion580.github.io/tags/deploy/"/>
    
      <category term="branch" scheme="http://kinglion580.github.io/tags/branch/"/>
    
  </entry>
  
  <entry>
    <title>添加评论</title>
    <link href="http://kinglion580.github.io/2018/01/13/comment/"/>
    <id>http://kinglion580.github.io/2018/01/13/comment/</id>
    <published>2018-01-13T13:21:55.385Z</published>
    <updated>2018-01-13T13:30:55.233Z</updated>
    
    <content type="html"><![CDATA[<h2 id="gitment"><a href="#gitment" class="headerlink" title="gitment"></a>gitment</h2><p>待补</p><h2 id="valine"><a href="#valine" class="headerlink" title="valine"></a>valine</h2><ul><li><a href="https://github.com/xcss/Valine" target="_blank" rel="noopener">valine github</a></li><li><a href="https://valine.js.org/#/" target="_blank" rel="noopener">valine 说明文档</a></li></ul><ol><li><p>valine 基于 leancloud ，先要注册一个 leancloud 账号 <a href="https://leancloud.cn/dashboard/login.html#/signup" target="_blank" rel="noopener">点击这里注册</a></p></li><li><p>然后 <a href="https://leancloud.cn/dashboard/applist.html#/newapp" target="_blank" rel="noopener">创建应用</a></p></li><li><p>选择刚刚创建的<code>应用</code>&gt;<code>设置</code>&gt;选择<code>应用 Key</code></p><p><img src="http://ww1.sinaimg.cn/large/8f2bdb7fgy1fnfa98p9j3j20930c174s.jpg" alt=""></p></li><li><p>在安全中心配置安全域名 <code>https://kinglion580.github.io</code> </p><p><img src="http://ww1.sinaimg.cn/large/8f2bdb7fgy1fnfaesgcoij207706d74a.jpg" alt=""></p></li><li><p>修改系统配置文件 <code>_config.yml</code> 的配置 <code>valine</code>  ，具体配置参见 <a href="https://valine.js.org/#/configuration" target="_blank" rel="noopener">https://valine.js.org/#/configuration</a></p></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;gitment&quot;&gt;&lt;a href=&quot;#gitment&quot; class=&quot;headerlink&quot; title=&quot;gitment&quot;&gt;&lt;/a&gt;gitment&lt;/h2&gt;&lt;p&gt;待补&lt;/p&gt;
&lt;h2 id=&quot;valine&quot;&gt;&lt;a href=&quot;#valine&quot; class=&quot;he
      
    
    </summary>
    
      <category term="hexo" scheme="http://kinglion580.github.io/categories/hexo/"/>
    
      <category term="comment" scheme="http://kinglion580.github.io/categories/hexo/comment/"/>
    
    
      <category term="hexo" scheme="http://kinglion580.github.io/tags/hexo/"/>
    
      <category term="comment" scheme="http://kinglion580.github.io/tags/comment/"/>
    
      <category term="gitment" scheme="http://kinglion580.github.io/tags/gitment/"/>
    
      <category term="valine" scheme="http://kinglion580.github.io/tags/valine/"/>
    
  </entry>
  
  <entry>
    <title>stdout_stderr</title>
    <link href="http://kinglion580.github.io/2018/01/13/stdout_stderr/"/>
    <id>http://kinglion580.github.io/2018/01/13/stdout_stderr/</id>
    <published>2018-01-13T08:06:08.913Z</published>
    <updated>2018-01-13T08:06:08.913Z</updated>
    
    <content type="html"><![CDATA[<h1 id="determine-if-output-is-stdout-or-stderr"><a href="#determine-if-output-is-stdout-or-stderr" class="headerlink" title="determine if output is stdout or stderr"></a>determine if output is stdout or stderr</h1><h2 id="solution"><a href="#solution" class="headerlink" title="solution"></a>solution</h2><ul><li><strong>redireciton</strong><blockquote><ul><li>standard input: <code>0</code></li><li>standard output: <code>1</code></li><li>standard error: <code>2</code></li></ul></blockquote></li></ul><ul><li><strong>print STDERR in red</strong><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash func 2&gt; &gt;(<span class="keyword">while</span> <span class="built_in">read</span> line; <span class="keyword">do</span> <span class="built_in">echo</span> -e <span class="string">"\e[01;31m<span class="variable">$line</span>\e[0m"</span> &gt;&amp;2;<span class="keyword">done</span>)</span><br></pre></td></tr></table></figure></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://dn-simplecloud.shiyanlou.com/5962221513739678076-wm" alt="实验楼" title="">                </div>                <div class="image-caption">实验楼</div>            </figure><h2 id="references"><a href="#references" class="headerlink" title="references"></a>references</h2><ul><li><a href="https://superuser.com/questions/453598/determine-if-output-is-stdout-or-stderr" target="_blank" rel="noopener">determine if output is stdout or stderr</a></li><li><a href="https://serverfault.com/questions/59262/bash-print-stderr-in-red-color#" target="_blank" rel="noopener">bash:print stderr in red color</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;determine-if-output-is-stdout-or-stderr&quot;&gt;&lt;a href=&quot;#determine-if-output-is-stdout-or-stderr&quot; class=&quot;headerlink&quot; title=&quot;determine if o
      
    
    </summary>
    
      <category term="linux" scheme="http://kinglion580.github.io/categories/linux/"/>
    
      <category term="challenge" scheme="http://kinglion580.github.io/categories/linux/challenge/"/>
    
    
      <category term="stdout" scheme="http://kinglion580.github.io/tags/stdout/"/>
    
      <category term="stderr" scheme="http://kinglion580.github.io/tags/stderr/"/>
    
  </entry>
  
  <entry>
    <title>sed_markdown</title>
    <link href="http://kinglion580.github.io/2018/01/13/sed_markdown/"/>
    <id>http://kinglion580.github.io/2018/01/13/sed_markdown/</id>
    <published>2018-01-13T08:06:08.912Z</published>
    <updated>2018-01-13T08:06:08.913Z</updated>
    
    <content type="html"><![CDATA[<h1 id="question"><a href="#question" class="headerlink" title="question"></a>question</h1><h2 id="optimize-markdown-documents-with-sed"><a href="#optimize-markdown-documents-with-sed" class="headerlink" title="optimize markdown documents with sed"></a>optimize markdown documents with sed</h2><h3 id="introduce"><a href="#introduce" class="headerlink" title="introduce"></a>introduce</h3><p>You are the document inspector of the shiyanlou, need to check document format every day, a document found in different marks appear blank between too much (provisions require only a blank document appeared in 2, 3 cases), and all the image formats are written into the link, need you use this document to quickly repair Sed.</p><p>For example, a document does not regulate instances and link errors:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">## title one</span><br><span class="line"></span><br><span class="line">## Title Two</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## Title Three</span><br><span class="line"></span><br><span class="line">[picture-1] (https://www.shiyanlou.com/test.png)</span><br></pre></td></tr></table></figure></p><p>Title Two and Title Three require only one empty line directly.</p><p>you should execute the Sed script in this way:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Sed -f /home/shiyanlou/fix-format.sed document</span><br></pre></td></tr></table></figure></p><p>After execution, the document is turned into:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">## title one</span><br><span class="line"></span><br><span class="line">## Title Two</span><br><span class="line"></span><br><span class="line">## Title Three</span><br><span class="line"></span><br><span class="line">[picture-1] (https://www.shiyanlou.com/test.png)</span><br></pre></td></tr></table></figure></p><h3 id="target"><a href="#target" class="headerlink" title="target"></a>target</h3><ol><li>The script path must be placed in the <code>/home/shiyanlou/fix-format.sed</code></li><li>The way to call is: <code>sed -f /home/shiyanlou/fix-format.sed</code> document</li><li>Delete extra repeat blank lines in a document</li><li>revising the format of the picture link</li></ol><h3 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h3><ol><li><p>sed matching empty lines</p></li><li><p>the hints of the picture link are all in [picture-xxx] format, and the suffix of the address is.Png or.Jpg</p></li><li><p>test document download link: <a href="http://labfile.oss.aliyuncs.com/courses/980/test-document.md" target="_blank" rel="noopener">http://labfile.oss.aliyuncs.com/courses/980/test-document.md</a></p></li></ol><h3 id="Knowledge-point"><a href="#Knowledge-point" class="headerlink" title="Knowledge point"></a>Knowledge point</h3><ul><li>regular expression</li><li>Sed</li></ul><h1 id="keypoint"><a href="#keypoint" class="headerlink" title="keypoint"></a>keypoint</h1><ul><li><p><strong>delete rows retain only one line</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/^$/&#123;</span><br><span class="line">  N</span><br><span class="line">  /^\n$/D</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>replace</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s/\[picture/\!\[picture/</span><br></pre></td></tr></table></figure></li></ul><p><em>Note that the escape character</em></p><h1 id="references"><a href="#references" class="headerlink" title="references"></a>references</h1><ul><li><a href="https://github.com/kinglion580/syl_linux/blob/master/knowlege/sed.md" target="_blank" rel="noopener">my-knowledge-sed</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;question&quot;&gt;&lt;a href=&quot;#question&quot; class=&quot;headerlink&quot; title=&quot;question&quot;&gt;&lt;/a&gt;question&lt;/h1&gt;&lt;h2 id=&quot;optimize-markdown-documents-with-sed&quot;&gt;&lt;a 
      
    
    </summary>
    
      <category term="linux" scheme="http://kinglion580.github.io/categories/linux/"/>
    
      <category term="challenge" scheme="http://kinglion580.github.io/categories/linux/challenge/"/>
    
    
      <category term="sed" scheme="http://kinglion580.github.io/tags/sed/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://kinglion580.github.io/2018/01/13/hello-world/"/>
    <id>http://kinglion580.github.io/2018/01/13/hello-world/</id>
    <published>2018-01-13T08:06:08.911Z</published>
    <updated>2018-01-13T08:06:08.911Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
      
    
    </summary>
    
      <category term="test" scheme="http://kinglion580.github.io/categories/test/"/>
    
    
      <category term="hello" scheme="http://kinglion580.github.io/tags/hello/"/>
    
      <category term="world" scheme="http://kinglion580.github.io/tags/world/"/>
    
  </entry>
  
  <entry>
    <title>monitor_mysql</title>
    <link href="http://kinglion580.github.io/2018/01/13/monitor_mysql/"/>
    <id>http://kinglion580.github.io/2018/01/13/monitor_mysql/</id>
    <published>2018-01-13T08:06:08.911Z</published>
    <updated>2018-01-13T08:06:08.912Z</updated>
    
    <content type="html"><![CDATA[<h1 id="question"><a href="#question" class="headerlink" title="question"></a>question</h1><h2 id="monitor-service-with-bash"><a href="#monitor-service-with-bash" class="headerlink" title="monitor service with bash"></a>monitor service with bash</h2><h3 id="introduce"><a href="#introduce" class="headerlink" title="introduce"></a>introduce</h3><p>On the server, our services may be hung up for a variety of reasons, such as mongodb Out of memory, and the system is kill, resulting in the service can not work properly. So we need a simple monitoring script <code>check_service.sh</code> to view the status of our service in real time. If the service state is stopped, we can try to restart the service automatically.</p><p>The script can accept a parameter, which is the name of the service. The name of the service can use the service command to view, start and stop the state. For example, check the status of the MySQL service.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$bash /home/shiyanlou/check_service.sh mysql</span><br><span class="line">Is Running</span><br></pre></td></tr></table></figure></p><p>If the MySQL service is not running, the MySQL service is started and the following output information is printed:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$bash /home/shiyanlou/check_service.sh mysql</span><br><span class="line">Restarting</span><br></pre></td></tr></table></figure></p><p>If the service does not exist, the error information is output:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$bash /home/shiyanlou/check_service.sh notfoundservice</span><br><span class="line">Error: Service Not Found</span><br></pre></td></tr></table></figure></p><h3 id="target"><a href="#target" class="headerlink" title="target"></a>target</h3><ol><li>The script is named <code>check_serive.sh</code>, and the path must be <code>/home/shiyanlou/check_service.sh</code></li></ol><ol><li>The script can <code>accept a parameter</code>, the parameter is the name of the service, and the check_service.sh service name can be called in this way</li></ol><ol><li>If the service is running “is Running”, if the service is stopped, the service is started, and if the service does not exist, output error information</li></ol><ol><li><code>/home/shiyanlou/check_service.sh mysql</code> is put into crontab once a day, which can ensure that MySQL service can be restarted when it is hung up, and we need to manually start cron service.</li></ol><h3 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h3><ol><li>You can use <code>sudo service xxx start/status/stop</code> for service management</li><li>Use of command line position parameters</li><li>Service status information use can be judged by grep</li></ol><h3 id="Knowledge-point"><a href="#Knowledge-point" class="headerlink" title="Knowledge point"></a>Knowledge point</h3><ul><li>Bash process control</li><li>The control of service and process</li><li>Crontab</li></ul><h3 id="keypoint"><a href="#keypoint" class="headerlink" title="keypoint"></a>keypoint</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ `ps -ef|grep -v grep|grep <span class="variable">$1</span>|wc -l` -gt 3 ];<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"is Running"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    sudo service <span class="variable">$1</span> start</span><br><span class="line">    <span class="keyword">if</span> [ `ps -ef|grep -v grep|grep <span class="variable">$1</span>|wc -l` -gt 2 ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"Restarting"</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"Error:Service Not Found"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ `netstat -at|grep <span class="variable">$1</span>|wc -l` -gt 0 ];<span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"is Running"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    sudo service <span class="variable">$1</span> start</span><br><span class="line">    <span class="keyword">if</span> [ `netstat -at|grep <span class="variable">$1</span>|wc -l` -gt 0 ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"Restarting"</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"Error:Service Not Found"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><h4 id="view-the-process"><a href="#view-the-process" class="headerlink" title="view the process"></a>view the process</h4><blockquote><ul><li><code>ps -ef</code></li><li><code>grep -v</code> exclude the grep process</li><li><code>wc -l</code> count row num</li><li><code>netstat -at|grep mysql</code></li><li><code>pstree</code> show the derived relation between the proceses in a tree diagram way</li></ul></blockquote><h4 id="start-crontab"><a href="#start-crontab" class="headerlink" title="start crontab"></a>start crontab</h4><blockquote><p><code>sudo service rsyslog start</code></p><p><code>sudo cron -f &amp;</code></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;question&quot;&gt;&lt;a href=&quot;#question&quot; class=&quot;headerlink&quot; title=&quot;question&quot;&gt;&lt;/a&gt;question&lt;/h1&gt;&lt;h2 id=&quot;monitor-service-with-bash&quot;&gt;&lt;a href=&quot;#moni
      
    
    </summary>
    
      <category term="linux" scheme="http://kinglion580.github.io/categories/linux/"/>
    
      <category term="challenge" scheme="http://kinglion580.github.io/categories/linux/challenge/"/>
    
    
      <category term="crontab" scheme="http://kinglion580.github.io/tags/crontab/"/>
    
      <category term="ps" scheme="http://kinglion580.github.io/tags/ps/"/>
    
      <category term="netstat" scheme="http://kinglion580.github.io/tags/netstat/"/>
    
  </entry>
  
  <entry>
    <title>github</title>
    <link href="http://kinglion580.github.io/2018/01/13/github/"/>
    <id>http://kinglion580.github.io/2018/01/13/github/</id>
    <published>2018-01-13T08:06:08.910Z</published>
    <updated>2018-01-13T08:06:08.910Z</updated>
    
    <content type="html"><![CDATA[<h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><!-- START doctoc generated TOC please keep comment here to allow auto update --><!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE --><p><strong>Table of Contents</strong>  <em>generated with <a href="https://github.com/thlorenz/doctoc" target="_blank" rel="noopener">DocToc</a></em></p><ul><li><a href="#%E6%8E%A8%E8%8D%90%E9%98%85%E8%AF%BB">推荐阅读</a></li><li><a href="#releases">Releases</a><ul><li><a href="#%E5%85%B3%E4%BA%8E-releases">关于 releases</a><ul><li><a href="#%E9%99%90%E5%88%B6">限制</a></li></ul></li><li><a href="#%E5%88%9B%E5%BB%BA-release">创建 release</a><ul><li><a href="#%E4%BB%8E-tag-%E5%88%9B%E5%BB%BA">从 tag 创建</a></li><li><a href="#%E5%8F%91%E5%B8%83%E6%9C%AC%E5%9C%B0%E7%9A%84%E5%8C%85">发布本地的包</a></li></ul></li></ul></li><li><a href="#tag">Tag</a><ul><li><a href="#%E5%88%97%E5%87%BA%E6%A0%87%E7%AD%BE">列出标签</a></li><li><a href="#%E5%88%9B%E5%BB%BA%E6%A0%87%E7%AD%BE">创建标签</a><ul><li><a href="#%E9%99%84%E6%B3%A8%E6%A0%87%E7%AD%BE">附注标签</a></li><li><a href="#%E8%BD%BB%E9%87%8F%E6%A0%87%E7%AD%BE">轻量标签</a></li></ul></li><li><a href="#%E6%8E%A8%E9%80%81%E6%A0%87%E7%AD%BE">推送标签</a><ul><li><a href="#%E5%8D%95%E4%B8%AA">单个</a></li><li><a href="#%E5%A4%9A%E4%B8%AA">多个</a></li></ul></li></ul></li><li><a href="#wikis">Wikis</a><ul><li><a href="#%E5%85%B3%E4%BA%8E-wikis">关于 wikis</a></li><li><a href="#%E9%80%9A%E8%BF%87%E5%9C%A8%E7%BA%BF%E7%95%8C%E9%9D%A2%E6%B7%BB%E5%8A%A0%E7%BB%B4%E5%9F%BA%E9%A1%B5%E9%9D%A2">通过在线界面添加维基页面</a></li><li><a href="#%E6%90%9C%E7%B4%A2">搜索</a></li></ul></li><li><a href="#issue">issue</a><ul><li><a href="#%E4%BB%8E-milestones-%E6%96%B0%E5%BB%BA-issue">从 milestones 新建 issue</a></li><li><a href="#%E4%BB%8E-projects-%E6%96%B0%E5%BB%BA-issue">从 projects 新建 issue</a></li></ul></li><li><a href="#milestones">milestones</a><ul><li><a href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA-milestones">创建一个 milestones</a></li><li><a href="#%E5%B0%86-issue-%E5%92%8C-milestones-%E5%85%B3%E8%81%94">将 issue 和 milestones 关联</a></li></ul></li><li><a href="#projects">Projects</a><ul><li><a href="#%E5%85%B3%E4%BA%8E-projects">关于 Projects</a></li><li><a href="#%E8%87%AA%E5%8A%A8%E5%B0%86-issue-%E9%93%BE%E6%8E%A5%E5%88%B0-to-do-%E9%82%A3%E5%88%97">自动将 issue 链接到 to do 那列</a></li></ul></li></ul><!-- END doctoc generated TOC please keep comment here to allow auto update --><h1 id="推荐阅读"><a href="#推荐阅读" class="headerlink" title="推荐阅读"></a>推荐阅读</h1><ul><li><a href="https://git-scm.com/book/zh/v2" target="_blank" rel="noopener">git中文文档</a></li><li><a href="https://help.github.com/" target="_blank" rel="noopener">github help</a></li><li><a href="https://help.github.com/articles/creating-releases/" target="_blank" rel="noopener">create releases</a></li><li><a href="https://help.github.com/articles/linking-to-releases/" target="_blank" rel="noopener">link to release</a></li><li><a href="https://git-scm.com/book/zh/v2/Git-%E5%9F%BA%E7%A1%80-%E6%89%93%E6%A0%87%E7%AD%BE" target="_blank" rel="noopener">打标签</a></li></ul><h1 id="Releases"><a href="#Releases" class="headerlink" title="Releases"></a>Releases</h1><h2 id="关于-releases"><a href="#关于-releases" class="headerlink" title="关于 releases"></a>关于 releases</h2><p>发行版是 GitHub 为用户打包和提供软件的方式。releases 里面可以放不同版本的软件，用户可以从中下载。使用 releases，您可以提供二进制文件的链接以及描述更改的发行说明。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://help.github.com/assets/images/help/releases/overview.png" alt="img" title="">                </div>                <div class="image-caption">img</div>            </figure><h3 id="限制"><a href="#限制" class="headerlink" title="限制"></a>限制</h3><p>我们不会限制二进制发布文件的总大小，也不会限制用于发布它们的带宽。但是，每个文件都必须小于 <code>2 GB</code>。</p><h2 id="创建-release"><a href="#创建-release" class="headerlink" title="创建 release"></a>创建 release</h2><p><a href="https://help.github.com/articles/creating-releases/" target="_blank" rel="noopener">create releases</a></p><p>创建 release 前要创建 tag。有下面两种创建方式：</p><ul><li>从 tag 创建</li><li>发布一个本地的包</li></ul><h3 id="从-tag-创建"><a href="#从-tag-创建" class="headerlink" title="从 tag 创建"></a>从 tag 创建</h3><p><a href="https://help.github.com/articles/linking-to-releases/" target="_blank" rel="noopener">link to release</a></p><p>步骤：</p><ol><li><p><a href="#tag">创建 tag</a> ：这一步完成过后在 releases 页面会出现一个 release</p></li><li><p>点击 releases 页面的版本号</p><p><img src="https://help.github.com/assets/images/help/releases/release_tag_name.png" alt="img"></p></li><li><p>跳转到的页面点 edit，填好各种信息</p><p><img src="http://ww1.sinaimg.cn/large/8f2bdb7fgy1fnbhnuvxsyj20lr0kddg9.jpg" alt=""></p></li><li><p>update release 过后</p><p><img src="http://ww1.sinaimg.cn/large/8f2bdb7fgy1fnbhr5uhgij20n80fjaaa.jpg" alt=""></p></li></ol><h3 id="发布本地的包"><a href="#发布本地的包" class="headerlink" title="发布本地的包"></a>发布本地的包</h3><p>release 基础就是 tag ，所以要在有 tag 的情况下。发布的时候要关联 tag</p><ol><li>在GitHub上，导航到存储库的主页面。</li></ol><ol><li><p>在您的存储库名称下，单击 <strong>releases</strong>。</p><p><img src="https://help.github.com/assets/images/help/releases/release-link.png" alt="发行标签"></p></li></ol><ol><li><p>点击 <strong>Draft a new release</strong>。</p><p><img src="https://help.github.com/assets/images/help/releases/draft_release_button.png" alt="发布草稿按钮"></p></li></ol><ol><li><p>为您的版本键入一个版本号。版本基于<a href="https://git-scm.com/book/zh/v2/Git-%E5%9F%BA%E7%A1%80-%E6%89%93%E6%A0%87%E7%AD%BE" target="_blank" rel="noopener">Git标签</a>。我们建议命名符合<a href="http://semver.org/" target="_blank" rel="noopener">语义版本的</a>标签。</p><p><img src="https://help.github.com/assets/images/help/releases/releases_tag_version.png" alt="发布标签的版本"></p></li></ol><ol><li><p>选择一个包含您想要发布的项目的分支。通常情况下，<code>master</code> 除非您发布测试版软件，否则您需要针对您的分支进行发布。</p><p><em>Select a branch that contains the project you want to release. Usually, you’ll want to release against your <code>master</code> branch, unless you’re releasing beta software.</em></p><p><img src="https://help.github.com/assets/images/help/releases/releases_tag_branch.png" alt="发布标记的分支"></p></li></ol><ol><li><p>输入描述您的版本的标题和描述。</p><p><img src="https://help.github.com/assets/images/help/releases/releases_description.png" alt="发布说明"></p></li></ol><ol><li><p>如果您想将二进制文件与发行版一起包括在内，例如编译后的程序，请在二进制文件夹中手动拖放或选择文件。</p><p><em>If you’d like to include binary files along with your release, such as compiled programs, drag and drop or select files manually in the binaries box.</em></p><p><img src="https://help.github.com/assets/images/help/releases/releases_adding_binary.gif" alt="提供一个DMG的发布"></p></li></ol><ol><li><p>如果版本不稳定，请选择“ <strong>这是预发行版”，</strong>以通知用户尚未准备好生产。</p><p><em>If the release is unstable, select <strong>This is a pre-release</strong> to notify users that it’s not ready for production.</em></p><p><img src="https://help.github.com/assets/images/help/releases/prerelease_checkbox.png" alt="标记为预发行"></p></li></ol><ol><li><p>如果您准备公布您的版本，请点击<strong>发布版本</strong>。否则，请单击<strong>保存草稿</strong>以稍后处理。</p><p><em>If you’re ready to publicize your release, click <strong>Publish release</strong>. Otherwise, click <strong>Save draft</strong> to work on it later.</em></p><p><img src="https://help.github.com/assets/images/help/releases/release_buttons.png" alt="发布或草稿释放按钮"></p></li></ol><h1 id="Tag"><a href="#Tag" class="headerlink" title="Tag"></a>Tag</h1><p>像其他版本控制系统（VCS）一样，Git 可以<strong>给历史中的某一个提交</strong>打上<strong>标签</strong>，<strong>以示重要</strong>。 比较有代表性的是人们会使用这个功能来标记发布结点（v1.0 等等）。 在本节中，你将会学习如何列出已有的标签、如何创建新标签、以及不同类型的标签分别是什么。</p><ul><li>列出标签 <code>git tag</code></li><li><a href="#创建标签">创建 <code>git tag -a [tagname] -m &#39;[tag description]&#39;</code></a></li><li><a href="#推送标签">推送 </a><ul><li><code>git push origin [tagname]</code></li><li><code>git push origin --tags</code></li></ul></li></ul><p><strong>这样创建过后会自动生成一个 release</strong></p><h2 id="列出标签"><a href="#列出标签" class="headerlink" title="列出标签"></a>列出标签</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tag</span><br></pre></td></tr></table></figure><h2 id="创建标签"><a href="#创建标签" class="headerlink" title="创建标签"></a>创建标签</h2><p>Git 使用两种主要类型的标签：轻量标签（lightweight）与附注标签（annotated）。</p><p>一个<code>轻量标签</code>很像一个不会改变的分支 - 它只是一个<strong>特定提交的引用</strong>。</p><p>然而，<code>附注标签</code>是存储在 Git 数据库中的一个<strong>完整对象</strong>。 它们是可以被校验的；其中包含打标签者的名字、电子邮件地址、日期时间；还有一个标签信息；并且可以使用 GNU Privacy Guard （GPG）签名与验证。 <strong>通常建议创建附注标签</strong>，这样你可以拥有以上所有信息；但是如果你只是想用一个临时的标签，或者因为某些原因不想要保存那些信息，轻量标签也是可用的。</p><h3 id="附注标签"><a href="#附注标签" class="headerlink" title="附注标签"></a>附注标签</h3><p>运行 <code>tag</code> 命令时指定 <code>-a</code> 选项：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -a v0.1 -m <span class="string">'my version 0.1'</span></span><br><span class="line">$ git tag</span><br><span class="line">v0.1</span><br></pre></td></tr></table></figure><blockquote><p><code>-m</code> 选项指定了一条将会存储在标签中的信息。 如果没有为附注标签指定一条信息，Git 会运行编辑器要求你输入信息。</p></blockquote><p>通过使用 <code>git show</code> 命令可以看到标签信息与对应的提交信息：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">$ git show</span><br><span class="line">commit ad204d47e2bc887acac78c1027f18622bcff34d4 (HEAD -&gt; <span class="built_in">source</span>, tag: v0.1, origin/<span class="built_in">source</span>, origin/HEAD)</span><br><span class="line">Author: kinglion580 &lt;1609019405@qq.com&gt;</span><br><span class="line">Date:   Tue Jan 9 20:45:02 2018 +0800</span><br><span class="line"></span><br><span class="line">    fix deploy</span><br><span class="line"></span><br><span class="line">diff --git a/_config.yml b/_config.yml</span><br><span class="line">index 959ad9f..7f8d6c5 100644</span><br><span class="line">--- a/_config.yml</span><br><span class="line">+++ b/_config.yml</span><br><span class="line">@@ -76,9 +76,10 @@ theme: indigo</span><br><span class="line"></span><br><span class="line"> <span class="comment"># Deployment</span></span><br><span class="line"> <span class="comment">## Docs: https://hexo.io/docs/deployment.html</span></span><br><span class="line">+<span class="comment">## repo: https://github.com/kinglion580/kinglion580.github.io.git</span></span><br><span class="line"> deploy:</span><br><span class="line">   <span class="built_in">type</span>: git</span><br><span class="line">-  repo: https://github.com/kinglion580/kinglion580.github.io.git</span><br><span class="line">+  repo: git@github.com:kinglion580/kinglion580.github.io.git</span><br><span class="line">   branch: master</span><br></pre></td></tr></table></figure><blockquote><p>输出显示了打标签者的信息、打标签的日期时间、附注信息，然后显示具体的提交信息。</p></blockquote><h3 id="轻量标签"><a href="#轻量标签" class="headerlink" title="轻量标签"></a>轻量标签</h3><p>另一种给提交打标签的方式是使用轻量标签。 轻量标签本质上是将提交校验存储到一个文件中 - 没有保存任何其他信息。 创建轻量标签，<strong>不需要</strong>使用 <code>-a</code>、<code>-s</code> 或 <code>-m</code> 选项，只需要提供标签名字：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git tag v1.4-lw</span><br><span class="line">$ git tag</span><br><span class="line">v1.4-lw</span><br></pre></td></tr></table></figure><p>这时，如果在标签上运行 <code>git show</code>，你不会看到额外的标签信息。 命令只会显示出提交信息：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git show v1.4-lw</span><br><span class="line">commit ca82a6dff817ec66f44342007202690a93763949</span><br><span class="line">Author: Scott Chacon &lt;schacon@gee-mail.com&gt;</span><br><span class="line">Date:   Mon Mar 17 21:52:11 2008 -0700</span><br><span class="line"></span><br><span class="line">    changed the version number</span><br></pre></td></tr></table></figure><h2 id="推送标签"><a href="#推送标签" class="headerlink" title="推送标签"></a>推送标签</h2><h3 id="单个"><a href="#单个" class="headerlink" title="单个"></a>单个</h3><p><code>git push origin [tagname]</code></p><p>例如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin v0.1</span><br></pre></td></tr></table></figure><h3 id="多个"><a href="#多个" class="headerlink" title="多个"></a>多个</h3><p><code>git push origin --tags</code></p><p>如果想要一次性推送很多标签，也可以使用带有 <code>--tags</code> 选项的 <code>git push</code> 命令。 这将会把所有不在远程仓库服务器上的标签全部传送到那里。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin --tags</span><br><span class="line">Counting objects: 1, <span class="keyword">done</span>.</span><br><span class="line">Writing objects: 100% (1/1), 160 bytes | 0 bytes/s, <span class="keyword">done</span>.</span><br><span class="line">Total 1 (delta 0), reused 0 (delta 0)</span><br><span class="line">To git@github.com:schacon/simplegit.git</span><br><span class="line"> * [new tag]         v1.4 -&gt; v1.4</span><br><span class="line"> * [new tag]         v1.4-lw -&gt; v1.4-lw</span><br></pre></td></tr></table></figure><blockquote><p><strong>注意：标签和分支概念不一样，标签并不能像分支一i样来回移动。不能真的被检出。</strong></p></blockquote><h1 id="Wikis"><a href="#Wikis" class="headerlink" title="Wikis"></a>Wikis</h1><h2 id="关于-wikis"><a href="#关于-wikis" class="headerlink" title="关于 wikis"></a>关于 wikis</h2><p>正如编写好的代码和优秀的测试很重要，优秀的文档可以帮助其他人使用和扩展您的项目。</p><p>每个GitHub存储库都配备了一个托管文档的部分，称为<em>wiki</em>。</p><p><em>Just as writing good code and great tests are important, excellent documentation helps others use and extend your project.</em></p><p><em>Every GitHub repository comes equipped with a section for hosting documentation, called a wiki.</em></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://help.github.com/assets/images/help/wiki/wiki_main_showcase.png" alt="主要的wiki展示" title="">                </div>                <div class="image-caption">主要的wiki展示</div>            </figure><p>GitHub Wiki是您的存储库中的一个地方，您可以共享关于您的项目的长篇内容，例如如何使用它，如何设计它，如何设计其核心原则，等等。README旨在快速引导读者了解您的项目可以做什么，而维基可以用来提供额外的文档。</p><p>使用wiki，您可以<a href="https://help.github.com/articles/getting-started-with-writing-and-formatting-on-github" target="_blank" rel="noopener">像GitHub上的其他地方一样编写内容</a>。我们使用<a href="https://github.com/github/markup" target="_blank" rel="noopener">我们的开源Markup库</a>将不同的格式转换成HTML，所以当您制作维基页面时，您可以选择使用Markdown，RST，Textile或任何其他支持的格式编写。</p><p>Wiki可以直接在GitHub上进行编辑，也可以离线使用文本编辑器，只需推送更改即可。维基通过设计协作。默认情况下，只有存储库上的协作者可以对Wiki进行更改，但是可以将其配置<a href="https://help.github.com/articles/changing-access-permissions-for-wikis" target="_blank" rel="noopener">为对公共存储库中的所有用户</a>启用。</p><p><em>GitHub Wikis are a place in your repository where you can share long-form content about your project, such as how to use it, how it’s been designed, manifestos on its core principles, and so on. Whereas a README is intended to quickly orient readers as to what your project can do, wikis can be used to provide additional documentation.</em></p><p><em>With wikis, you can <a href="https://help.github.com/articles/getting-started-with-writing-and-formatting-on-github" target="_blank" rel="noopener">write content just like everywhere else on GitHub</a>. We use <a href="https://github.com/github/markup" target="_blank" rel="noopener">our open-source Markup library</a> to convert different formats into HTML, so you can choose to write in Markdown, RST, Textile, or any other supported format when you craft wiki pages.</em></p><p><em>Wikis can be edited directly on GitHub, or you can work with a text editor offline and simply push your changes. Wikis are collaborative by design. By default, only collaborators on your repository can make changes to wikis, but you can configure this to be enabled <a href="https://help.github.com/articles/changing-access-permissions-for-wikis" target="_blank" rel="noopener">for all users on public repositories</a>.</em></p><h2 id="通过在线界面添加维基页面"><a href="#通过在线界面添加维基页面" class="headerlink" title="通过在线界面添加维基页面"></a>通过在线界面添加维基页面</h2><p>您可以使用我们的Web界面将新的wiki页面直接添加到您的存储库。</p><ol><li><p>在GitHub上，导航到存储库的主页面。</p></li><li><p>在您的存储库名称下，单击  <strong>Wiki</strong>。</p><p><img src="https://help.github.com/assets/images/help/wiki/wiki_menu_link.png" alt="Wiki菜单链接"></p></li><li><p>从顶部菜单栏中，单击<strong>新建页面</strong>。</p><p><img src="http://ww1.sinaimg.cn/large/8f2bdb7fgy1fnbhzrd8eyj20ns06g3yl.jpg" alt=""></p></li><li><p>Wiki页面可以包含GitHub支持的任何标记。默认选择是Markdown，但是您可以使用“编辑模式”下拉菜单切换到不同的标记语言。</p><p><img src="https://help.github.com/assets/images/help/wiki/wiki_dropdown_markup.gif" alt="Wiki标记选择"></p></li><li><p>使用文本编辑器来添加页面的内容。您还可以使用顶部的维基工具栏使用<a href="https://en.wikipedia.org/wiki/WYSIWYG" target="_blank" rel="noopener">图形化的所见即所得编辑器</a>输入文本 。</p><p><img src="https://help.github.com/assets/images/help/wiki/wiki_wysiwyg.png" alt="所见即所得"></p></li><li><p>输入描述您添加的新文件的提交消息。</p><p><img src="https://help.github.com/assets/images/help/wiki/wiki_commit_message.png" alt="Wiki提交消息"></p></li><li><p>要将更改提交到wiki，请单击<strong>保存页面</strong>。</p></li></ol><h2 id="搜索"><a href="#搜索" class="headerlink" title="搜索"></a>搜索</h2><p><a href="https://help.github.com/articles/searching-wikis/" target="_blank" rel="noopener">https://help.github.com/articles/searching-wikis/</a></p><p>You can search wikis by using search qualifiers in any combination to narrow your search results.</p><p><strong>Tips:</strong></p><ul><li>For a list of search syntaxes that you can add to any search qualifier to further improve your results, see “<a href="https://help.github.com/articles/understanding-the-search-syntax" target="_blank" rel="noopener">Understanding the search syntax</a>“.</li><li>Use quotations around multi-word search terms. For example, if you want to search for issues with the label “In progress,” you’d search for <code>label:&quot;in progress&quot;</code>. Search is not case sensitive.</li></ul><blockquote><p><strong>Search within a user or organization’s repositories</strong></p></blockquote><p>To find wiki pages from all repositories owned by a certain user or organization, use the <code>user</code> or <code>org</code>qualifier. To find wiki pages from a specific repository, use the <code>repo</code> qualifier.</p><table><thead><tr><th>Qualifier</th><th>Example</th></tr></thead><tbody><tr><td><code>user:*USERNAME*</code></td><td><a href="https://github.com/search?q=user%3Adefunkt&amp;type=Wikis" target="_blank" rel="noopener"><strong>user:defunkt</strong></a> matches wiki pages from repositories owned by @defunkt.</td></tr><tr><td><code>org:*ORGNAME*</code></td><td><a href="https://github.com/search?q=org%3Agithub&amp;type=Wikis&amp;utf8=%E2%9C%93" target="_blank" rel="noopener"><strong>org:github</strong></a> matches wikis in repositories owned by the GitHub organization.</td></tr><tr><td><code>repo:*USERNAME/REPOSITORY*</code></td><td><a href="https://github.com/search?q=user%3Adefunkt&amp;type=Wikis" target="_blank" rel="noopener"><strong>repo:defunkt/gibberish</strong></a> matches wiki pages from @defunkt’s “gibberish” repository.</td></tr></tbody></table><blockquote><p><strong>Search within a wiki page title or body text</strong></p></blockquote><p>The <code>in</code> qualifier limits the search to the wiki page title or body text. Without the qualifier, both the title and body text are searched.</p><table><thead><tr><th>Qualifier</th><th>Example</th></tr></thead><tbody><tr><td><code>in:title</code></td><td><a href="https://github.com/search?q=usage+in%3Atitle&amp;type=Wikis" target="_blank" rel="noopener"><strong>usage in:title</strong></a> matches wiki page titles with the word “usage.”</td></tr><tr><td><code>in:body</code></td><td><a href="https://github.com/search?q=installation+in%3Abody&amp;type=Wikis" target="_blank" rel="noopener"><strong>installation in:body</strong></a> matches wiki pages with the word “installation” in their main body text.</td></tr></tbody></table><blockquote><p><strong>Search by last updated date</strong></p></blockquote><p>The <code>updated</code> qualifier matches wiki pages that were last updated within the specified date range.</p><p>Dates support <a href="https://help.github.com/articles/understanding-the-search-syntax" target="_blank" rel="noopener">greater than, less than, and range qualifiers</a>.</p><table><thead><tr><th>Qualifier</th><th>Example</th></tr></thead><tbody><tr><td><code>updated:*YYYY-MM-DD*</code></td><td><a href="https://github.com/search?q=usage+updated%3A%3E2016-01-01&amp;type=Wikis" target="_blank" rel="noopener"><strong>usage updated:&gt;2016-01-01</strong></a> matches wiki pages with the word “usage” that were last updated after 2016-01-01.</td></tr></tbody></table><h1 id="issue"><a href="#issue" class="headerlink" title="issue"></a>issue</h1><ul><li>issue 的种类用 label 标记</li><li>issue 的处理进度用 milestones 标记</li><li>更高端的管理方式，<a href="#Projects">使用 Projects</a></li></ul><h2 id="从-milestones-新建-issue"><a href="#从-milestones-新建-issue" class="headerlink" title="从 milestones 新建 issue"></a>从 milestones 新建 issue</h2><ol><li><p><a href="#创建一个-milestones">新建一个 milestones</a> </p></li><li><p>在创建的 milestones 里点击 new issue ，添加一个 issue。</p><p><img src="http://ww1.sinaimg.cn/large/8f2bdb7fgy1fnbkv7lndtj20se04ct8s.jpg" alt=""></p></li><li><p>相关信息填写好后 submit 就可以了</p><p><img src="http://ww1.sinaimg.cn/large/8f2bdb7fgy1fnbkwnf8jlj20tf0bmmxh.jpg" alt=""></p></li></ol><h2 id="从-projects-新建-issue"><a href="#从-projects-新建-issue" class="headerlink" title="从 projects 新建 issue"></a>从 projects 新建 issue</h2><p>移步至 <a href="#Projects">projects</a></p><h1 id="milestones"><a href="#milestones" class="headerlink" title="milestones"></a>milestones</h1><p>您可以使用里程碑跟踪存储库中的问题组或进程请求的<strong>进度</strong>。</p><p>s里程碑里可以和问题以及请求相关联。</p><h2 id="创建一个-milestones"><a href="#创建一个-milestones" class="headerlink" title="创建一个 milestones"></a>创建一个 milestones</h2><ol><li>点击 issues-》milestones</li></ol><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://ww1.sinaimg.cn/large/8f2bdb7fgy1fnbk785ix7j20t30dzq3s.jpg" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><ol><li><p>点击 new milestone</p><p><img src="http://ww1.sinaimg.cn/large/8f2bdb7fgy1fnbk8doghpj20s103qweg.jpg" alt=""></p></li><li><p>填写相关信息</p><p><img src="http://ww1.sinaimg.cn/large/8f2bdb7fgy1fnbka3en9lj20sw0gfgls.jpg" alt=""></p></li><li><p>填写好后提交</p><p><img src="http://ww1.sinaimg.cn/large/8f2bdb7fgy1fnbkb6f2ypj20sk06z74e.jpg" alt=""></p></li></ol><h2 id="将-issue-和-milestones-关联"><a href="#将-issue-和-milestones-关联" class="headerlink" title="将 issue 和 milestones 关联"></a>将 issue 和 milestones 关联</h2><p>进入到 issue 界面可以选 issue 属于哪个 milestone</p><p>   <img src="http://ww1.sinaimg.cn/large/8f2bdb7fgy1fnbkg9feuhj20tf0kw75v.jpg" alt=""></p><p>不用点击 commit</p><p>在里程碑里可以查看到包括的 issue</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://ww1.sinaimg.cn/large/8f2bdb7fgy1fnbklntcebj20sq0dijs1.jpg" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><blockquote><p>可以鼠标按住勾选框左边的地方拖动调整<code>优先顺序</code></p><p>可以点击最上面的勾选框对包含的 issue <code>筛选</code></p></blockquote><p>解决一个 issue 就 close 掉 issue ，在里程碑的界面会显示处理进度</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://ww1.sinaimg.cn/large/8f2bdb7fgy1fnbkb6f2ypj20sk06z74e.jpg" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h1 id="Projects"><a href="#Projects" class="headerlink" title="Projects"></a>Projects</h1><h2 id="关于-Projects"><a href="#关于-Projects" class="headerlink" title="关于 Projects"></a>关于 Projects</h2><p>projects 相当于融合了 issue 的 label 和 milestone。在一个界面就行操作。</p><p>projects 提供项目管理功能。可以点击 Projects 进入管理界面，点击添加会让你输入项目名，下面的选项可以选择 auto ，也就是自动套用有的模板，就出现下面的界面。</p><p>下图框选部分相当于是一个 milestone。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://ww1.sinaimg.cn/large/8f2bdb7fgy1fnblvkpqvmj20sy07mmx9.jpg" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>下图这个东西叫看板。里面的列相当于 label。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://ww1.sinaimg.cn/large/8f2bdb7fgy1fnblcbr24ej21gr0lr76y.jpg" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><blockquote><p>可以把右边列的 issue 拖动到左边的列中去，也可以添加一个 card 转换成 issue。</p><p>上面显示的是进度。</p><p>在 issue 界面中被 close 的 issue 会自动出现在 done 那列中。</p><p>只用拖动和一些简单的操作就可以管理进度，非常方便，而 milestone 的方式是采用勾选框勾选。</p><p>projects 里面可以增加列，也就是说可以采用添加列的方式实现一些其他的功能，比如说添加列来归类 issue 的种类。</p></blockquote><h2 id="自动将-issue-链接到-to-do-那列"><a href="#自动将-issue-链接到-to-do-那列" class="headerlink" title="自动将 issue 链接到 to do 那列"></a>自动将 issue 链接到 to do 那列</h2><ol><li><p>点击 Manage automation</p><p><img src="http://ww1.sinaimg.cn/large/8f2bdb7fgy1fnbm71gv6ej2092076dfu.jpg" alt=""></p></li><li><p>勾选</p><p><img src="http://ww1.sinaimg.cn/large/8f2bdb7fgy1fnbm8b93x1j20cq0a174k.jpg" alt=""></p><p>第一个勾选框意思就是新添加的 issue 和请求自动移动到这里</p><p>第二个就是重新打开的 issue 和请求自动移动到这里</p></li><li><p>连接</p><p><img src="http://ww1.sinaimg.cn/large/8f2bdb7fgy1fnbmci1raqj20t00diaay.jpg" alt=""></p></li><li><p>在 projects 页面就可以看到 issue 自动出现在 to do 那列</p><p><img src="http://ww1.sinaimg.cn/large/8f2bdb7fgy1fnbme1q6w0j20d807gt8s.jpg" alt=""></p></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;目录&quot;&gt;&lt;a href=&quot;#目录&quot; class=&quot;headerlink&quot; title=&quot;目录&quot;&gt;&lt;/a&gt;目录&lt;/h1&gt;&lt;!-- START doctoc generated TOC please keep comment here to allow auto up
      
    
    </summary>
    
      <category term="github" scheme="http://kinglion580.github.io/categories/github/"/>
    
      <category term="knowledge" scheme="http://kinglion580.github.io/categories/github/knowledge/"/>
    
    
      <category term="releases" scheme="http://kinglion580.github.io/tags/releases/"/>
    
      <category term="tags" scheme="http://kinglion580.github.io/tags/tags/"/>
    
      <category term="wikis" scheme="http://kinglion580.github.io/tags/wikis/"/>
    
      <category term="issues" scheme="http://kinglion580.github.io/tags/issues/"/>
    
      <category term="milestones" scheme="http://kinglion580.github.io/tags/milestones/"/>
    
      <category term="projects" scheme="http://kinglion580.github.io/tags/projects/"/>
    
  </entry>
  
  <entry>
    <title>find_and_pack</title>
    <link href="http://kinglion580.github.io/2018/01/13/find_and_pack/"/>
    <id>http://kinglion580.github.io/2018/01/13/find_and_pack/</id>
    <published>2018-01-13T08:06:08.909Z</published>
    <updated>2018-01-13T08:06:08.910Z</updated>
    
    <content type="html"><![CDATA[<h1 id="questions"><a href="#questions" class="headerlink" title="questions"></a>questions</h1><h2 id="Find-and-package-the-specified-files"><a href="#Find-and-package-the-specified-files" class="headerlink" title="Find and package the specified files"></a>Find and package the specified files</h2><h3 id="introduce"><a href="#introduce" class="headerlink" title="introduce"></a>introduce</h3><p>The challenges you need to find the <code>/etc</code> directory to meet the needs of the file, then, package and compress the file into a <code>tar.gz</code> package.</p><p>First, create a folder <code>/home/shiyanlou/backup</code>, and all the files that need to be packaged will be copied to this directory.</p><p>Then, copy all the files larger than 12K to the <code>/home/shiyanlou/backup</code> directory in the /etc directory of the lab building, and we need to keep the directory structure. For example, the <code>/etc/apt/trusted.gpg</code> file is 14K, and it will be copied to the <code>/home/shiyanlou/backup/etc/apt/trusted.gpg</code> path position. Notice that there are many files in the subfolder under the <code>/etc</code> directory that are more than 12K and need to be copied.</p><p>After the copy is completed, the <code>/home/shiyanlou/backup</code> is packaged and compressed, and the generated packet <code>backup.tar.gz</code> is placed under the <code>/tmp/backup.tar.gz</code> path.</p><p>Click to submit the result after the completion of the above task.</p><h3 id="target"><a href="#target" class="headerlink" title="target"></a>target</h3><ol><li>The compressed packet backup.tar.gz is placed under the <code>/tmp/backup.tar.gz</code> path</li><li>The compressed package backup.tar.gz contains all the files larger than 12K under the <code>/etc</code> directory, regardless of whether the shiyanlou user has access to the file or not.</li></ol><p>Please do not use soft links, such as the need to complete the copy of the file past.</p><h3 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h3><ul><li>find, copy, pack, compress</li></ul><h3 id="Knowledge-point"><a href="#Knowledge-point" class="headerlink" title="Knowledge point"></a>Knowledge point</h3><ul><li>Linux file and directory operation</li><li>Linux file lookup operation</li><li>Tar command package</li><li>Gzip command compression</li></ul><h1 id="keypoint"><a href="#keypoint" class="headerlink" title="keypoint"></a>keypoint</h1><h2 id="The-find-command-looks-up-some-files-and-copies-them-to-the-specified-directory"><a href="#The-find-command-looks-up-some-files-and-copies-them-to-the-specified-directory" class="headerlink" title="The find command looks up some files and copies them to the specified directory"></a>The find command looks up some files and copies them to the specified directory</h2><blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; sudo find /etc -size +12k -<span class="built_in">exec</span> cp --parents &#123;&#125; backup \;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><p>&gt;</p><blockquote><ul><li><code>exec</code></li><li><code>cp --parents</code></li></ul></blockquote><h1 id="references"><a href="#references" class="headerlink" title="references"></a>references</h1><ul><li><a href="http://blog.csdn.net/longintchar/article/details/51493562" target="_blank" rel="noopener">find,cp,exec-sample</a></li><li><a href="https://www.kafan.cn/edu/6999644.html" target="_blank" rel="noopener">find,cp,exec-detail</a></li><li><a href="http://blog.csdn.net/wgembed/article/details/39668645" target="_blank" rel="noopener">Preserving directory structure application instances when CP copies</a></li></ul><h1 id="tools"><a href="#tools" class="headerlink" title="tools"></a>tools</h1><ul><li><a href="http://man.linuxde.net/" target="_blank" rel="noopener">linux command search</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;questions&quot;&gt;&lt;a href=&quot;#questions&quot; class=&quot;headerlink&quot; title=&quot;questions&quot;&gt;&lt;/a&gt;questions&lt;/h1&gt;&lt;h2 id=&quot;Find-and-package-the-specified-files&quot;
      
    
    </summary>
    
      <category term="linux" scheme="http://kinglion580.github.io/categories/linux/"/>
    
      <category term="challenge" scheme="http://kinglion580.github.io/categories/linux/challenge/"/>
    
    
      <category term="find" scheme="http://kinglion580.github.io/tags/find/"/>
    
      <category term="exec" scheme="http://kinglion580.github.io/tags/exec/"/>
    
      <category term="cp" scheme="http://kinglion580.github.io/tags/cp/"/>
    
  </entry>
  
  <entry>
    <title>crontab</title>
    <link href="http://kinglion580.github.io/2018/01/13/crontab/"/>
    <id>http://kinglion580.github.io/2018/01/13/crontab/</id>
    <published>2018-01-13T08:06:08.909Z</published>
    <updated>2018-01-13T08:06:08.909Z</updated>
    
    <content type="html"><![CDATA[<h1 id="question"><a href="#question" class="headerlink" title="question"></a>question</h1><h2 id="Periodically-pack-a-backup-log"><a href="#Periodically-pack-a-backup-log" class="headerlink" title="Periodically pack a backup log"></a>Periodically pack a backup log</h2><h3 id="introduce"><a href="#introduce" class="headerlink" title="introduce"></a>introduce</h3><p>You are the server administrator of the experiment building, and you need to back up the log files in the <code>/var/log</code> directory every day. After the backup is packed and compressed for a long time, the file name is stored in the format of the <code>year-month-day.Tar.gz</code>. For example, the file backed up in November 1, 2017 is 2017-11-01.tar.gz, and the files after the backup are stored in the <code>/home/shiyanlou/backup</code> directory.</p><p>Note that you need to use the method of incremental backup of the tar command to make a backup.</p><h3 id="target"><a href="#target" class="headerlink" title="target"></a>target</h3><ol><li>Add planning tasks for shiyanlou users</li></ol><ol><li><code>Every day at 3 a.m</code>., back up the <code>/var/log</code> directory to the <code>/home/shiyanlou/backup/year-month-day.Tar.gz</code> file, and note that it is an incremental backup.</li></ol><ol><li>Backup file naming format is <code>year-month-day.Tar.gz</code></li></ol><ol><li>Write to crontab with a command, do not write the script<h3 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h3></li></ol><p>Crontab sets a tar command for an incremental backup of the specified time.</p><h3 id="Knowledge-point"><a href="#Knowledge-point" class="headerlink" title="Knowledge point"></a>Knowledge point</h3><p>Date formatted output string<br>Crontab set planning tasks<br>Tar command incremental backup mode</p><h1 id="keypoint"><a href="#keypoint" class="headerlink" title="keypoint"></a>keypoint</h1><blockquote><p>0 3 <em> </em> * tar -cvf /home/shiyanlou/backup/$(date +\%Y-\%m-\%d).tar.gz -g /var/log</p><ul><li><code>tar.gz</code></li><li><code>0 3</code></li><li><code>\%Y\%m\%d\%H\%M\%S</code></li></ul></blockquote><ul><li><h2 id="how-to-start-cron"><a href="#how-to-start-cron" class="headerlink" title="how to start cron"></a>how to start cron</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo service rsyslog start</span><br><span class="line">sudo cron -f &amp;</span><br></pre></td></tr></table></figure></li><li><h2 id="check-whether-cron-is-started"><a href="#check-whether-cron-is-started" class="headerlink" title="check whether cron is started"></a>check whether cron is started</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ps aux|grep cron</span><br><span class="line">or</span><br><span class="line">pgrep cron</span><br></pre></td></tr></table></figure></li><li><h2 id="edit"><a href="#edit" class="headerlink" title="edit"></a>edit</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure></li><li><h2 id="list"><a href="#list" class="headerlink" title="list"></a>list</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -l</span><br></pre></td></tr></table></figure></li><li><h2 id="remove"><a href="#remove" class="headerlink" title="remove"></a>remove</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -r</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;question&quot;&gt;&lt;a href=&quot;#question&quot; class=&quot;headerlink&quot; title=&quot;question&quot;&gt;&lt;/a&gt;question&lt;/h1&gt;&lt;h2 id=&quot;Periodically-pack-a-backup-log&quot;&gt;&lt;a href=&quot;
      
    
    </summary>
    
      <category term="linux" scheme="http://kinglion580.github.io/categories/linux/"/>
    
      <category term="challenge" scheme="http://kinglion580.github.io/categories/linux/challenge/"/>
    
    
      <category term="crontab" scheme="http://kinglion580.github.io/tags/crontab/"/>
    
  </entry>
  
</feed>
